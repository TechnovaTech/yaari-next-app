(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{2898:function(e,r,t){"use strict";t.d(r,{Z:function(){return createLucideIcon}});var a=t(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,r)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:n,...d},c)=>(0,a.createElement)("svg",{ref:c,...l,width:s,height:s,stroke:t,strokeWidth:i?24*Number(o)/Number(s):o,className:`lucide lucide-${toKebabCase(e)}`,...d},[...r.map(([e,r])=>(0,a.createElement)(e,r)),...(Array.isArray(n)?n:[n])||[]]));return t.displayName=`${e}`,t}},7972:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var a=t(2898);let l=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2549:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var a=t(2898);let l=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6732:function(e,r,t){Promise.resolve().then(t.bind(t,596))},596:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return EditProfilePage}});var a=t(7437),l=t(4033),s=t(7972),o=t(2549),i=t(2898);let n=(0,i.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var d=t(2265),c=t(3487),u=t(5650),f=t(5128);function EditProfileScreen(e){let{onBack:r}=e,{lang:t}=(0,c.useLanguage)(),l=u.I[t],[i,m]=(0,d.useState)(""),[b,p]=(0,d.useState)(""),[x,g]=(0,d.useState)(""),[h,y]=(0,d.useState)(""),[v,j]=(0,d.useState)([]),[N,w]=(0,d.useState)(""),[k,S]=(0,d.useState)([]),[P,C]=(0,d.useState)(!1),[E,L]=(0,d.useState)(""),[z,Z]=(0,d.useState)("");(0,d.useEffect)(()=>{(0,f.o$)("Edit Profile");let e=localStorage.getItem("user");if(e){let r=JSON.parse(e);m(r.name||""),p(r.phone||""),g(r.email||""),y(r.about||""),j(r.hobbies||[]),L(r.gender||""),Z(r.profilePic||""),S(r.gallery||[])}},[]);let addHobby=()=>{N.trim()&&(j([...v,N.trim()]),w(""))},removeHobby=e=>{j(v.filter((r,t)=>t!==e))};return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("div",{className:"flex items-center p-4 pt-8",children:(0,a.jsx)("button",{onClick:r,className:"mr-3",children:(0,a.jsx)("span",{className:"text-2xl text-black",children:"←"})})}),(0,a.jsx)("div",{className:"px-4 pb-6",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-black",children:l.editProfile})}),(0,a.jsxs)("div",{className:"flex items-center px-4 mb-8",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden mr-4",children:z?(0,a.jsx)("img",{src:z,alt:"Profile",className:"w-full h-full object-cover"}):(0,a.jsx)(s.Z,{size:48,className:"text-gray-500"})}),(0,a.jsx)("input",{type:"file",id:"profilePic",accept:"image/*",className:"hidden",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){let e=new FileReader;e.onloadend=()=>{Z(e.result)},e.readAsDataURL(t)}}}),(0,a.jsx)("label",{htmlFor:"profilePic",className:"px-6 py-3 border-2 border-primary text-primary rounded-full font-semibold cursor-pointer flex items-center justify-center",children:l.uploadPicture})]}),(0,a.jsxs)("div",{className:"px-4 mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Gender"}),(0,a.jsx)("div",{className:"w-full p-4 border border-gray-300 rounded-full text-base bg-gray-100 text-gray-700 capitalize",children:E||"Not set"})]}),(0,a.jsxs)("div",{className:"px-4 space-y-6 pb-24",children:[(0,a.jsx)("input",{type:"text",value:i,onChange:e=>m(e.target.value),placeholder:"User Name",className:"w-full p-4 border border-gray-300 rounded-full text-base focus:outline-none focus:border-primary bg-gray-50",style:{fontSize:"16px"}}),(0,a.jsx)("input",{type:"tel",value:b,onChange:e=>p(e.target.value),placeholder:"Phone Number",className:"w-full p-4 border border-gray-300 rounded-full text-base focus:outline-none focus:border-primary bg-gray-50",style:{fontSize:"16px"}}),(0,a.jsx)("input",{type:"email",value:x,onChange:e=>g(e.target.value),placeholder:"Email Address",className:"w-full p-4 border border-gray-300 rounded-full text-base focus:outline-none focus:border-primary bg-gray-50",style:{fontSize:"16px"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:l.aboutMe}),(0,a.jsx)("textarea",{value:h,onChange:e=>y(e.target.value),placeholder:"Tell us about yourself...",rows:4,className:"w-full p-4 border border-gray-300 rounded-2xl text-base focus:outline-none focus:border-primary bg-gray-50 resize-none",style:{fontSize:"16px"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:l.photoGallery}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[k.map((e,r)=>(0,a.jsxs)("div",{className:"aspect-square bg-gray-200 rounded-lg relative overflow-hidden",children:[(0,a.jsx)("img",{src:e,alt:"Gallery ".concat(r),className:"w-full h-full object-cover"}),(0,a.jsx)("button",{onClick:()=>S(k.filter((e,t)=>t!==r)),className:"absolute top-1 right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(o.Z,{size:14,className:"text-white"})})]},r)),(0,a.jsx)("input",{type:"file",id:"galleryPic",accept:"image/*",className:"hidden",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){let e=new FileReader;e.onloadend=()=>{S([...k,e.result])},e.readAsDataURL(t)}}}),(0,a.jsx)("label",{htmlFor:"galleryPic",className:"aspect-square bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer",children:(0,a.jsx)(n,{size:24,className:"text-gray-400"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:l.hobbies}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:v.map((e,r)=>(0,a.jsxs)("span",{className:"bg-orange-50 text-gray-800 px-4 py-2 rounded-full text-sm border border-gray-200 flex items-center gap-2",children:[e,(0,a.jsx)("button",{onClick:()=>removeHobby(r),children:(0,a.jsx)(o.Z,{size:14,className:"text-gray-600"})})]},r))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onKeyPress:e=>"Enter"===e.key&&addHobby(),placeholder:"Add a hobby",className:"flex-1 p-3 border border-gray-300 rounded-full text-sm focus:outline-none focus:border-primary bg-gray-50",style:{fontSize:"16px"}}),(0,a.jsx)("button",{onClick:addHobby,className:"px-4 py-3 bg-primary text-white rounded-full font-semibold text-sm whitespace-nowrap flex items-center justify-center",children:l.add})]})]})]}),(0,a.jsx)("div",{className:"fixed bottom-8 left-4 right-4",children:(0,a.jsx)("button",{onClick:async()=>{if(!i.trim()){alert("Please enter your name");return}C(!0),(0,f.L9)("ProfileSaveAttempt");try{let e=JSON.parse(localStorage.getItem("user")||"{}"),r={name:i,phone:b,email:x,about:h,hobbies:v,profilePic:z,gallery:k};console.log("Saving profile:",r);let t=await fetch("https://acsgroup.cloud/api/users/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await t.json();if(console.log("Save response:",a),t.ok){let r={...e,name:i,phone:b,email:x,about:h,hobbies:v,profilePic:z,gallery:k};localStorage.setItem("user",JSON.stringify(r)),(0,f.Lj)({Name:i,Email:x,Phone:b,Gender:E,About:h,Hobbies:v.join(", "),"Profile Picture":z}).catch(e=>{console.warn("CleverTap profile update failed:",e)}),(0,f.L9)("ProfileSaved"),alert("Profile saved to database successfully!"),setTimeout(()=>{window.location.href="/users"},0)}else(0,f.L9)("ProfileSaveFailed",{error:a.error||"Unknown error"}),alert("Failed to save profile: "+(a.error||"Unknown error"))}catch(e){(0,f.L9)("ProfileSaveError"),alert("Error saving profile")}finally{C(!1)}},disabled:P,className:"w-full bg-primary text-white py-4 rounded-full font-semibold text-lg disabled:opacity-50 flex items-center justify-center",children:P?"Saving...":l.saveChanges})})]})}function EditProfilePage(){let e=(0,l.useRouter)();return(0,a.jsx)(EditProfileScreen,{onBack:()=>e.back()})}}},function(e){e.O(0,[601,623,617,971,472,744],function(){return e(e.s=6732)}),_N_E=e.O()}]);