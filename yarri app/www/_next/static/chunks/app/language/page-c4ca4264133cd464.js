(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[477],{8491:function(e,t,n){Promise.resolve().then(n.bind(n,1248))},1248:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return LanguagePage}});var r=n(7437),a=n(4033),l=n(2265),o=n(5128),i=n(3103);function LanguageScreen(e){let{onNext:t,onSelectLanguage:n}=e,[a,c]=(0,l.useState)("हिंदी"),[s,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(0,o.o$)("Language Select")},[]);let buildApiUrl=e=>{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,n=i.dV.isNativePlatform();return!t||n?"".concat("https://admin.yaari.me","/api").concat(e):"/api".concat(e)},handleNext=async()=>{let e="English"===a?"en":"hi";(0,o.L9)("LanguageNextClicked",{language:e});let r=localStorage.getItem("user");if(r){let t=JSON.parse(r);if(t.language=e,localStorage.setItem("user",JSON.stringify(t)),t.id){u(!0);try{await fetch(buildApiUrl("/users/".concat(t.id)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({language:e})})}catch(e){console.error("Error saving language:",e)}finally{u(!1)}}}n(e),t()};return(0,r.jsxs)("div",{className:"min-h-screen bg-white flex flex-col p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8 mt-6",children:"Select Language"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsx)("div",{className:"space-y-4 mb-auto",children:[{label:"English",value:"English"},{label:"हिंदी",value:"हिंदी"}].map(e=>(0,r.jsx)("button",{onClick:()=>{c(e.value),(0,o.L9)("LanguageSelected",{language:e.value})},className:"w-full p-4 rounded-full border-2 transition-colors text-base flex items-center justify-center ".concat(a===e.value?"border-primary text-primary bg-orange-50":"border-gray-200 text-gray-700 bg-white"),children:e.label},e.value))}),(0,r.jsx)("button",{onClick:handleNext,disabled:s,className:"w-full bg-primary text-white py-4 rounded-full font-semibold text-base mt-8 flex items-center justify-center disabled:opacity-50",children:s?"Saving...":"Next"})]})]})}var c=n(3487),s=n(1061);function LanguagePage(){let e=(0,a.useRouter)(),{setLang:t}=(0,c.useLanguage)();return(0,r.jsx)(s.Z,{children:(0,r.jsx)(LanguageScreen,{onNext:()=>e.push("/gender"),onSelectLanguage:t})})}},1061:function(e,t,n){"use strict";n.d(t,{Z:function(){return PageLayout}});var r=n(7437);function PageLayout(e){let{children:t,hasHeader:n=!1,className:a}=e;return(0,r.jsx)("div",{className:a,style:{paddingTop:n?0:"env(safe-area-inset-top)"},children:t})}n(2265)},3487:function(e,t,n){"use strict";n.r(t),n.d(t,{LanguageProvider:function(){return LanguageProvider},useLanguage:function(){return useLanguage}});var r=n(7437),a=n(2265);let l=(0,a.createContext)({lang:"en",setLang:()=>{}}),useLanguage=()=>(0,a.useContext)(l);function LanguageProvider(e){let{children:t}=e,[n,o]=(0,a.useState)("en");return(0,a.useEffect)(()=>{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.language&&o(t.language)}},[]),(0,r.jsx)(l.Provider,{value:{lang:n,setLang:o},children:t})}},5128:function(e,t,n){"use strict";n.d(t,{H4:function(){return trackAppOpen},L9:function(){return trackEvent},Lj:function(){return updateUserProfile},QU:function(){return trackUserLogin},Tf:function(){return trackSubscription},YY:function(){return trackProfileView},o$:function(){return trackScreenView}});var r=n(1007),a=n(3103),l=n(4725);let isNativeCleverTapReady=()=>{try{return a.dV.isNativePlatform()&&"function"==typeof(null===r.z||void 0===r.z?void 0:r.z.notifyDeviceReady)&&"function"==typeof(null===r.z||void 0===r.z?void 0:r.z.recordEventWithName)}catch(e){return!1}};(()=>{let e=!isNativeCleverTapReady();if(!e)return;let t=window;if(t.clevertap)return;t.clevertap={event:[],profile:[],account:[],onUserLogin:[],region:"eu1"},t.clevertap.account.push({id:"775-RZ7-W67Z"});let n=document.createElement("script");n.src="https://static.clevertap.com/js/clevertap.min.js",n.type="text/javascript",n.async=!0,n.onload=()=>console.log("CleverTap Web SDK loaded"),n.onerror=e=>console.error("CleverTap Web SDK load failed:",e);let r=document.getElementsByTagName("script")[0];((null==r?void 0:r.parentNode)||document.head).insertBefore(n,r||null)})(),(0,l.BP)();let isCleverTapAvailable=()=>isNativeCleverTapReady(),formatPhoneE164=e=>{if(!e)return;let t=String(e).trim();if(t.startsWith("+"))return t;let n=t.replace(/[^0-9]/g,"");return 10===n.length?"+91".concat(n):12===n.length&&n.startsWith("91")?"+".concat(n):void 0},updateUserProfile=async e=>{let t={...e},n=formatPhoneE164(e.Phone);n?t.Phone=n:delete t.Phone,t["MSG-push"]=!0,t["MSG-email"]=!0,t["MSG-sms"]=!0;try{(0,l.Bq)(t)}catch(e){}if(isCleverTapAvailable())try{await r.z.profileSet(t),console.log("✅ CleverTap profile updated:",t)}catch(e){console.log("CleverTap profileSet error:",e)}else try{var a,o;null===(o=window.clevertap)||void 0===o||null===(a=o.profile)||void 0===a||a.push({Site:t}),console.log("✅ Web CleverTap profile updated:",t)}catch(e){console.log("Web CleverTap profile push error:",e)}},trackUserLogin=async(e,t)=>{let n={Identity:e,...t||{}},a=formatPhoneE164(n.Phone);a?n.Phone=a:delete n.Phone,n["MSG-push"]=!0,n["MSG-email"]=!0,n["MSG-sms"]=!0;try{(0,l.xU)(e),n&&(0,l.Bq)(n)}catch(e){}if(isCleverTapAvailable())try{let a=r.z.onUserLogin(n),l=new Promise((e,t)=>{setTimeout(()=>t(Error("CleverTap login timeout")),5e3)});await Promise.race([a,l]),console.log("✅ CleverTap user login tracked:",e),await updateUserProfile(t||{})}catch(e){console.log("CleverTap onUserLogin error:",e)}else try{var o,i;null===(i=window.clevertap)||void 0===i||null===(o=i.onUserLogin)||void 0===o||o.push({Site:n}),console.log("✅ Web CleverTap user login tracked:",e),await updateUserProfile(t||{})}catch(e){console.log("Web CleverTap onUserLogin error:",e)}},trackEvent=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n={...t,timestamp:new Date().toISOString(),platform:a.dV.isNativePlatform()?"mobile":"web"},o=new Promise((t,a)=>{try{if(isCleverTapAvailable())n&&Object.keys(n).length>0?r.z.recordEventWithNameAndProps(e,n):r.z.recordEventWithName(e);else{var l,o,i,c;n&&Object.keys(n).length>0?null===(o=window.clevertap)||void 0===o||null===(l=o.event)||void 0===l||l.push(e,n):null===(c=window.clevertap)||void 0===c||null===(i=c.event)||void 0===i||i.push(e)}t()}catch(e){a(e)}}),i=new Promise((e,t)=>{setTimeout(()=>t(Error("CleverTap event timeout")),3e3)});await Promise.race([o,i]),(0,l.WO)(e,n),console.log("✅ Event tracked: ".concat(e),n)}catch(e){console.error("Error tracking event:",e)}},trackProfileView=async e=>{await trackEvent("Profile Viewed",{"Viewed User ID":e})},trackSubscription=async(e,t,n)=>{await trackEvent("Subscription Purchased",{"Plan Name":e,Amount:t,Currency:n})},trackAppOpen=async()=>{try{(0,l.WO)("App Open")}catch(e){}if(isCleverTapAvailable())try{await r.z.notifyDeviceReady(),await r.z.recordEventWithName("App Open")}catch(e){console.log("CleverTap notifyDeviceReady/App Open error:",e)}else try{var e,t;null===(t=window.clevertap)||void 0===t||null===(e=t.event)||void 0===e||e.push("App Open")}catch(e){console.log("Web CleverTap App Open error:",e)}},trackScreenView=async e=>{await trackEvent("Screen View",{"Screen Name":e})}},4725:function(e,t,n){"use strict";n.d(t,{BP:function(){return initMixpanel},Bq:function(){return mixpanelPeopleSet},WO:function(){return mixpanelTrack},xU:function(){return mixpanelIdentify}});var r=n(718);let a=!1,getToken=()=>{let e="b19e0189e8c34fe2a980f09ba1ceeedc";return e&&e.trim().length>0?e.trim():"b19e0189e8c34fe2a980f09ba1ceeedc"},initMixpanel=e=>{if(a)return;let t=e||getToken();if(!t){console.warn("Mixpanel token missing. Set NEXT_PUBLIC_MIXPANEL_TOKEN in .env.local");return}r.Z.init(t,{debug:!0,track_pageview:!1}),a=!0,console.log("Mixpanel initialized")},mixpanelTrack=(e,t)=>{try{if(initMixpanel(),!a)return;t&&Object.keys(t).length>0?r.Z.track(e,t):r.Z.track(e)}catch(e){console.log("Mixpanel track error:",e)}},mixpanelIdentify=e=>{try{if(initMixpanel(),!a)return;r.Z.identify(e)}catch(e){console.log("Mixpanel identify error:",e)}},normalizePeopleProps=e=>{var t,n,r;let a={...e},l=null!==(t=e.Name)&&void 0!==t?t:e.name,o=null!==(n=e.Email)&&void 0!==n?n:e.email,i=null!==(r=e.Phone)&&void 0!==r?r:e.phone;return l&&(a.$name=String(l),delete a.Name,delete a.name),o&&(a.$email=String(o),delete a.Email,delete a.email),i&&(a.$phone=String(i),delete a.Phone,delete a.phone),a},mixpanelPeopleSet=e=>{try{if(initMixpanel(),!a)return;let t=normalizePeopleProps(e);r.Z.people.set(t)}catch(e){console.log("Mixpanel people.set error:",e)}}},622:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(2265),a=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,n){var r,c={},s=null,u=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(u=t.ref),t)l.call(t,r)&&!i.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:a,type:e,key:s,ref:u,props:c,_owner:o.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,n){"use strict";e.exports=n(622)},4033:function(e,t,n){e.exports=n(94)}},function(e){e.O(0,[601,623,971,472,744],function(){return e(e.s=8491)}),_N_E=e.O()}]);