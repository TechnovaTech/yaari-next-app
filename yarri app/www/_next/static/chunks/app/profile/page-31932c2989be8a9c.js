(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var a=r(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:n,children:s,...c},u)=>(0,a.createElement)("svg",{ref:u,...l,width:o,height:o,stroke:r,strokeWidth:n?24*Number(i)/Number(o):i,className:`lucide lucide-${toKebabCase(e)}`,...c},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(s)?s:[s])||[]]));return r.displayName=`${e}`,r}},1291:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2898);let l=(0,a.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2741:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2898);let l=(0,a.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9036:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2898);let l=(0,a.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},7972:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(2898);let l=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8777:function(e,t,r){Promise.resolve().then(r.bind(r,535))},535:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ProfilePage}});var a=r(7437),l=r(4033),o=r(2898);let i=(0,o.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var n=r(2741),s=r(9036);let c=(0,o.Z)("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),u=(0,o.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var d=r(1291),y=r(7972);let h=(0,o.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);var p=r(2265),m=r(3487),f=r(5650),g=r(5128),x=r(3103);function ProfileMenuScreen(e){let{onBack:t,onCallHistory:r,onTransactionHistory:l,onCustomerSupport:o,onEditProfile:k,onPrivacySecurity:b}=e,{lang:v}=(0,m.useLanguage)(),N=f.I[v],[w,j]=(0,p.useState)("User Name"),[C,P]=(0,p.useState)(""),[Z,L]=(0,p.useState)(""),[S,z]=(0,p.useState)(""),buildApiUrl=e=>{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,r=x.dV.isNativePlatform();return!t||r?"".concat("https://admin.yaari.me","/api").concat(e):"/api".concat(e)},normalizeUrl=e=>{var t;return null==e?void 0:null===(t=e.replace(/https?:\/\/localhost:\d+/g,"https://admin.yaari.me"))||void 0===t?void 0:t.replace(/https?:\/\/0\.0\.0\.0:\d+/g,"https://admin.yaari.me")};(0,p.useEffect)(()=>{(0,g.o$)("Profile Menu");let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);j(t.name||"User Name"),P(t.phone||""),L(t.email||""),t.profilePic&&z(normalizeUrl(t.profilePic)),t.id&&fetch(buildApiUrl("/users/".concat(t.id,"/images"))).then(async e=>{if(!e.ok)return null;try{return await e.json()}catch(e){return null}}).then(e=>{if(!e)return;let t=normalizeUrl(e.profilePic||"");t&&z(t)}).catch(e=>{console.error("Failed to fetch latest profile image:",e)})}},[]);let handleLogout=()=>{(0,g.L9)("LogoutClicked"),localStorage.clear(),window.location.href="/login"},M=[{icon:i,label:N.transactionHistory,key:"transaction",bgColor:"bg-orange-100"},{icon:n.Z,label:N.callHistory,key:"call",bgColor:"bg-orange-100"},{icon:s.Z,label:N.privacySecurity,key:"privacy",bgColor:"bg-orange-100"},{icon:c,label:N.customerSupport,key:"support",bgColor:"bg-orange-100"},{icon:u,label:N.logOut,key:"logout",bgColor:"bg-orange-100"}];return(0,a.jsx)("div",{className:"min-h-screen bg-white",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},className:"mb-6 p-2 -ml-2 active:opacity-50",children:(0,a.jsx)(d.Z,{size:24,className:"text-gray-800"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center mb-8",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)("div",{className:"w-32 h-32 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden",children:S?(0,a.jsx)("img",{src:S,alt:"Profile",className:"w-full h-full object-cover"}):(0,a.jsx)(y.Z,{size:64,className:"text-gray-500"})}),(0,a.jsx)("button",{onClick:()=>{(0,g.L9)("EditProfileClicked"),k()},className:"absolute -top-1 -right-1 w-8 h-8 bg-white rounded-full border border-gray-300 flex items-center justify-center shadow-sm",children:(0,a.jsx)(h,{size:14,className:"text-primary"})})]}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:w}),C&&(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["+91 ",C]}),Z&&!C&&(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:Z})]}),(0,a.jsx)("div",{className:"space-y-3",children:M.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>{(0,g.L9)("ProfileMenuClick",{item:e.key});let t="call"===e.key?r:"transaction"===e.key?l:"support"===e.key?o:"privacy"===e.key?b:"logout"===e.key?handleLogout:void 0;t&&t()},className:"w-full flex items-center space-x-4 p-4 ".concat(e.bgColor," rounded-2xl"),children:[(0,a.jsx)(e.icon,{size:20,className:"text-gray-800 flex-shrink-0",style:{marginTop:"2px"}}),(0,a.jsx)("span",{className:"text-gray-800 font-medium mt-2.5",children:e.label})]},t))})]})})}function ProfilePage(){let e=(0,l.useRouter)();return(0,a.jsx)(ProfileMenuScreen,{onBack:()=>e.back(),onCallHistory:()=>e.push("/call-history"),onTransactionHistory:()=>e.push("/transaction-history"),onCustomerSupport:()=>e.push("/customer-support"),onEditProfile:()=>e.push("/edit-profile"),onPrivacySecurity:()=>e.push("/privacy-security")})}}},function(e){e.O(0,[601,623,617,971,472,744],function(){return e(e.s=8777)}),_N_E=e.O()}]);