(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8339:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(2898);let l=(0,o.Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},2549:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(2898);let l=(0,o.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6527:function(e,t,n){Promise.resolve().then(n.t.bind(n,2853,23)),Promise.resolve().then(n.bind(n,9727)),Promise.resolve().then(n.bind(n,7859)),Promise.resolve().then(n.bind(n,3154)),Promise.resolve().then(n.bind(n,3487)),Promise.resolve().then(n.bind(n,5997)),Promise.resolve().then(n.t.bind(n,5360,23))},9727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return CleverTapInit}});var o=n(2265);function CleverTapInit(){return(0,o.useEffect)(()=>{let initializeCleverTap=async()=>{console.log("CleverTap initialization skipped - building without CleverTap")};initializeCleverTap()},[]),null}},7859:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return GlobalCallUI}});var o=n(7437),l=n(5997),r=n(8339),c=n(2741),a=n(2549);function IncomingCallModal(e){let{callerName:t,callType:n,onAccept:l,onDecline:s}=e;return(0,o.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-sm p-8 text-center",children:[(0,o.jsx)("div",{className:"w-24 h-24 bg-primary rounded-full mx-auto mb-4 flex items-center justify-center",children:"video"===n?(0,o.jsx)(r.Z,{size:40,className:"text-white"}):(0,o.jsx)(c.Z,{size:40,className:"text-white"})}),(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:t}),(0,o.jsxs)("p",{className:"text-gray-600 mb-8",children:["Incoming ",n," call..."]}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsxs)("button",{onClick:s,className:"flex-1 bg-red-500 text-white py-4 rounded-full flex items-center justify-center gap-2",children:[(0,o.jsx)(a.Z,{size:24}),(0,o.jsx)("span",{children:"Decline"})]}),(0,o.jsxs)("button",{onClick:l,className:"flex-1 bg-green-500 text-white py-4 rounded-full flex items-center justify-center gap-2",children:[(0,o.jsx)(c.Z,{size:24}),(0,o.jsx)("span",{children:"Accept"})]})]})]})})}var s=n(4033);function GlobalCallUI(){let{socket:e,incomingCall:t,setIncomingCall:n}=(0,l.useSocket)(),r=(0,s.useRouter)();return t?(0,o.jsx)(IncomingCallModal,{callerName:t.callerName,callType:t.callType,onAccept:()=>{if(!t||!e)return;let{callerId:o,callerName:l,callType:c,channelName:a}=t;sessionStorage.setItem("channelName",a),sessionStorage.setItem("callData",JSON.stringify({userName:l,userAvatar:"",rate:"video"===c?10:5,type:c,channelName:a,otherUserId:o})),e.emit("accept-call",{callerId:o,channelName:a,callType:c}),n(null),setTimeout(()=>{r.push("video"===c?"/video-call":"/audio-call")},100)},onDecline:()=>{t&&e&&(e.emit("decline-call",{callerId:t.callerId}),n(null))}}):null}},3154:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return NativeStatusBar}});var o,l,r,c,a=n(2265),s=n(3103);(o=r||(r={})).Dark="DARK",o.Light="LIGHT",o.Default="DEFAULT",(l=c||(c={})).None="NONE",l.Slide="SLIDE",l.Fade="FADE";let i=(0,s.fo)("StatusBar");function NativeStatusBar(){return(0,a.useEffect)(()=>{s.dV.isNativePlatform()&&(i.setStyle({style:r.Light}).catch(()=>{}),i.setBackgroundColor({color:"#FF6B35"}).catch(()=>{}),i.setOverlaysWebView({overlay:!1}).catch(()=>{}))},[]),null}},3487:function(e,t,n){"use strict";n.r(t),n.d(t,{LanguageProvider:function(){return LanguageProvider},useLanguage:function(){return useLanguage}});var o=n(7437),l=n(2265);let r=(0,l.createContext)({lang:"en",setLang:()=>{}}),useLanguage=()=>(0,l.useContext)(r);function LanguageProvider(e){let{children:t}=e,[n,c]=(0,l.useState)("en");return(0,o.jsx)(r.Provider,{value:{lang:n,setLang:c},children:t})}},5997:function(e,t,n){"use strict";n.r(t),n.d(t,{SocketProvider:function(){return SocketProvider},useSocket:function(){return useSocket}});var o=n(7437),l=n(2265),r=n(4337);let c=(0,l.createContext)({socket:null,isConnected:!1,incomingCall:null,setIncomingCall:()=>{}}),useSocket=()=>(0,l.useContext)(c);function SocketProvider(e){let{children:t}=e,[n,a]=(0,l.useState)(null),[s,i]=(0,l.useState)(!1),[u,d]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e="https://acsgroup.cloud";console.log("\uD83D\uDD0C Attempting to connect to Socket.io server:",e);let t=(0,r.io)(e,{transports:["websocket","polling"],timeout:2e4,forceNew:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5});return t.on("connect",()=>{console.log("✅ Socket connected successfully"),i(!0);let e=localStorage.getItem("user");if(e)try{let n=JSON.parse(e);console.log("\uD83D\uDC64 Registering user:",n.id),t.emit("register",n.id)}catch(e){console.error("❌ Error parsing user data:",e)}}),t.on("connect_error",e=>{console.error("❌ Socket connection error:",e),i(!1)}),t.on("disconnect",e=>{console.log("\uD83D\uDD0C Socket disconnected:",e),i(!1)}),t.on("reconnect",e=>{console.log("\uD83D\uDD04 Socket reconnected after",e,"attempts"),i(!0)}),t.on("reconnect_error",e=>{console.error("❌ Socket reconnection error:",e)}),t.on("incoming-call",e=>{let{callerId:t,callerName:n,callType:o,channelName:l}=e;console.log("\uD83D\uDCE5 Incoming call (global):",{callerId:t,callerName:n,callType:o,channelName:l}),d({callerId:t,callerName:n,callType:o,channelName:l})}),t.on("call-accepted",e=>{let{channelName:t,callType:n}=e;console.log("✅ Call accepted (global):",{channelName:t,callType:n});try{t&&sessionStorage.setItem("channelName",t);let e=sessionStorage.getItem("callData"),o=n||"audio";if(e)try{let t=JSON.parse(e);((null==t?void 0:t.type)==="video"||(null==t?void 0:t.type)==="audio")&&(o=t.type)}catch(e){}else n&&sessionStorage.setItem("callData",JSON.stringify({userName:"",userAvatar:"",rate:"video"===n?10:5,type:n,channelName:t,otherUserId:""}));let l="video"===o?"/video-call":"/audio-call";window.location.href=l}catch(e){console.error("Error handling global call-accepted:",e)}}),t.on("call-busy",e=>{let{message:t}=e;console.log("\uD83D\uDCF5 Call busy:",t),alert(t)}),t.on("call-ended",()=>{console.log("\uD83D\uDED1 Call ended (global) — clearing incomingCall"),d(null)}),a(t),()=>{console.log("\uD83E\uDDF9 Cleaning up socket connection"),t.off("incoming-call"),t.off("call-accepted"),t.off("call-busy"),t.off("call-ended"),t.off("connect"),t.off("connect_error"),t.off("disconnect"),t.off("reconnect"),t.off("reconnect_error"),t.disconnect()}},[]),(0,o.jsx)(c.Provider,{value:{socket:n,isConnected:s,incomingCall:u,setIncomingCall:d},children:t})}},2853:function(){},5360:function(e){e.exports={style:{fontFamily:"'__Baloo_Tammudu_2_ee997e', '__Baloo_Tammudu_2_Fallback_ee997e'",fontStyle:"normal"},className:"__className_ee997e",variable:"__variable_ee997e"}},622:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=n(2265),l=Symbol.for("react.element"),r=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,n){var o,s={},i=null,u=null;for(o in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(u=t.ref),t)r.call(t,o)&&!a.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:l,type:e,key:i,ref:u,props:s,_owner:c.current}}t.jsx=q,t.jsxs=q},7437:function(e,t,n){"use strict";e.exports=n(622)},4033:function(e,t,n){e.exports=n(94)}},function(e){e.O(0,[952,103,971,472,744],function(){return e(e.s=6527)}),_N_E=e.O()}]);