(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[764],{2898:function(e,t,s){"use strict";s.d(t,{Z:function(){return createLucideIcon}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,children:l,...o},d)=>(0,a.createElement)("svg",{ref:d,...r,width:n,height:n,stroke:s,strokeWidth:c?24*Number(i)/Number(n):i,className:`lucide lucide-${toKebabCase(e)}`,...o},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(l)?l:[l])||[]]));return s.displayName=`${e}`,s}},1291:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},5601:function(e,t,s){Promise.resolve().then(s.bind(s,3071))},3071:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return TransactionHistoryPage}});var a=s(7437),r=s(4033),n=s(2265),i=s(1291),c=s(3487),l=s(5650),o=s(5128);function TransactionHistoryScreen(e){let{onBack:t}=e,{lang:s}=(0,c.useLanguage)(),r=l.I[s],[d,m]=(0,n.useState)([]),[u,x]=(0,n.useState)(!0),[h,p]=(0,n.useState)(null);(0,n.useEffect)(()=>{(0,o.o$)("Transaction History");let e=localStorage.getItem("user");if(!e){p("Please login to view transactions"),x(!1);return}try{let t=JSON.parse(e);fetchTransactions(t.id)}catch(e){p("Please login to view transactions"),x(!1)}},[]);let fetchTransactions=async e=>{try{x(!0),p(null);let t=await fetch("".concat("https://admin.yaari.me","/api/users/").concat(e,"/transactions")),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to load transactions");let a=Array.isArray(s)?s:s.transactions||[];m(a)}catch(e){p((null==e?void 0:e.message)||"Failed to load transactions")}finally{x(!1)}},formatDate=e=>{try{if(!e)return"";let t=new Date(e);return t.toLocaleString()}catch(e){return""}};return(0,a.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("button",{onClick:t,className:"mb-6",children:(0,a.jsx)(i.Z,{size:24,className:"text-gray-800"})})}),(0,a.jsx)("div",{className:"px-4 pb-3",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-black",children:r.transactionHistory})}),u?(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}):h?(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsx)("p",{className:"text-red-600 text-sm",children:h})}):0===d.length?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsxs)("div",{className:"px-6 text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-800 mb-2",children:r.needHelp}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-800 mb-1",children:r.understanding}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-800 mb-4",children:r.yourTransactions}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:r.questionsText}),(0,a.jsx)("p",{className:"text-sm text-primary font-semibold mb-2",children:"support@yaari.me"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:r.ourTeam})]})}):(0,a.jsx)("div",{className:"px-4 pb-24 space-y-3",children:d.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"p-4 bg-white rounded-2xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900 capitalize",children:e.type||"Transaction"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-700",children:e.status||"success"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsx)("span",{children:formatDate(e.createdAt)}),(0,a.jsxs)("span",{children:["â‚¹",null!==(s=e.amountRupees)&&void 0!==s?s:0]})]}),"number"==typeof e.coins&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Coins: ",e.coins]}),e.description&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]},e._id||t)})})]})}function TransactionHistoryPage(){let e=(0,r.useRouter)();return(0,a.jsx)(TransactionHistoryScreen,{onBack:()=>e.back()})}}},function(e){e.O(0,[601,623,617,971,472,744],function(){return e(e.s=5601)}),_N_E=e.O()}]);