(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var n=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let r=(0,n.forwardRef)(({color:r="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:s,children:o,...c},d)=>(0,n.createElement)("svg",{ref:d,...a,width:l,height:l,stroke:r,strokeWidth:s?24*Number(i)/Number(l):i,className:`lucide lucide-${toKebabCase(e)}`,...c},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...(Array.isArray(o)?o:[o])||[]]));return r.displayName=`${e}`,r}},1291:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2898);let a=(0,n.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7796:function(e,t,r){Promise.resolve().then(r.bind(r,6676))},6676:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return GenderPage}});var n=r(7437),a=r(4033),l=r(2265),i=r(1291),s=r(3487),o=r(5650),c=r(5128),d=r(3103);function GenderScreen(e){let{onNext:t}=e,r=(0,a.useRouter)(),{lang:u}=(0,s.useLanguage)(),f=o.I[u],[m,g]=(0,l.useState)("female"),[h,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(0,c.o$)("Gender Select")},[]);let buildApiUrl=e=>{let t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,r=d.dV.isNativePlatform();return!t||r?"".concat("https://admin.yaari.me","/api").concat(e):"/api".concat(e)},handleNext=async()=>{x(!0);try{(0,c.L9)("GenderSaveAttempt",{gender:m}).catch(e=>{console.warn("CleverTap tracking failed:",e)});let e=JSON.parse(localStorage.getItem("user")||"{}");if(!(null==e?void 0:e.id)){alert("User session invalid. Please log in again."),x(!1);return}let r=await fetch(buildApiUrl("/users/".concat(e.id)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({gender:m})});if(r.ok){let r={...e,gender:m};localStorage.setItem("user",JSON.stringify(r)),(0,c.L9)("GenderSaved",{gender:m}).catch(e=>{console.warn("CleverTap tracking failed:",e)}),setTimeout(()=>{t()},0)}else(0,c.L9)("GenderSaveFailed",{gender:m}).catch(e=>{console.warn("CleverTap tracking failed:",e)}),alert("Failed to save gender")}catch(e){(0,c.L9)("GenderSaveError",{gender:m}).catch(e=>{console.warn("CleverTap tracking failed:",e)}),alert("Error saving gender")}finally{x(!1)}};return(0,n.jsxs)("div",{className:"min-h-screen bg-white flex flex-col p-6",children:[(0,n.jsx)("button",{onClick:()=>r.back(),className:"self-start mb-6",children:(0,n.jsx)(i.Z,{size:24,className:"text-gray-800"})}),(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-8",children:f.selectGender}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,n.jsxs)("div",{className:"flex justify-center space-x-4 mb-auto",children:[(0,n.jsx)("button",{onClick:()=>{g("male"),(0,c.L9)("GenderSelected",{gender:"male"})},className:"px-8 py-3 rounded-full border-2 transition-colors text-base flex items-center justify-center ".concat("male"===m?"border-primary text-primary bg-orange-50":"border-gray-200 text-gray-700 bg-white"),children:f.male}),(0,n.jsx)("button",{onClick:()=>{g("female"),(0,c.L9)("GenderSelected",{gender:"female"})},className:"px-8 py-3 rounded-full border-2 transition-colors text-base flex items-center justify-center ".concat("female"===m?"border-primary text-primary bg-orange-50":"border-gray-200 text-gray-700 bg-white"),children:f.female})]}),(0,n.jsx)("button",{onClick:handleNext,disabled:h,className:"w-full bg-primary text-white py-4 rounded-full font-semibold text-base mt-8 disabled:opacity-50 flex items-center justify-center",children:h?"Saving...":f.next})]})]})}function GenderPage(){let e=(0,a.useRouter)();return(0,n.jsx)(GenderScreen,{onNext:()=>e.push("/edit-profile")})}}},function(e){e.O(0,[601,623,617,971,472,744],function(){return e(e.s=7796)}),_N_E=e.O()}]);