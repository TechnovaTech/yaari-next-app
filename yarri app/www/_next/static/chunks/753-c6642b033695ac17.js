"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{4043:function(e,l,t){t.d(l,{Z:function(){return n}});var s=t(2898);let n=(0,s.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},7972:function(e,l,t){t.d(l,{Z:function(){return n}});var s=t(2898);let n=(0,s.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8339:function(e,l,t){t.d(l,{Z:function(){return n}});var s=t(2898);let n=(0,s.Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},2549:function(e,l,t){t.d(l,{Z:function(){return n}});var s=t(2898);let n=(0,s.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2606:function(e,l,t){t.d(l,{Z:function(){return CallConfirmationScreen}});var s=t(7437),n=t(2549),c=t(8339),a=t(2741),r=t(3487),o=t(5650);function CallConfirmationScreen(e){let{onClose:l,onConfirm:t,userName:i,callType:d,rate:u,userAvatar:x}=e,{lang:m}=(0,r.useLanguage)(),f=o.I[m];return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-sm p-6 relative",children:[(0,s.jsx)("button",{onClick:l,className:"absolute top-4 right-4",children:(0,s.jsx)(n.Z,{size:24,className:"text-gray-600"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center mt-4",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden mb-4",children:(0,s.jsx)("img",{src:x,alt:i,className:"w-full h-full object-cover"})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:i}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:["video"===d?(0,s.jsx)(c.Z,{size:20,className:"text-primary"}):(0,s.jsx)(a.Z,{size:20,className:"text-primary"}),(0,s.jsx)("span",{className:"text-gray-600",children:"video"===d?f.videoCall:f.audioCall})]}),(0,s.jsxs)("div",{className:"bg-orange-50 rounded-2xl p-4 w-full mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("span",{className:"text-gray-600",children:f.rate}),(0,s.jsxs)("span",{className:"text-xl font-bold text-primary",children:["₹",u,"/min"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:f.yourBalance}),(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-800",children:"₹250"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center mb-6",children:"hi"===m?"आपसे ₹".concat(u," प्रति मिनट शुल्क लिया जाएगा"):"You will be charged ₹".concat(u," per minute for this call")}),(0,s.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,s.jsx)("button",{onClick:l,className:"flex-1 py-3 border-2 border-gray-300 text-gray-700 rounded-full font-semibold flex items-center justify-center",children:f.cancel}),(0,s.jsx)("button",{onClick:t,className:"flex-1 py-3 bg-primary text-white rounded-full font-semibold flex items-center justify-center",children:f.startCall})]})]})]})})}},7115:function(e,l,t){t.d(l,{Z:function(){return PermissionDeniedModal}});var s=t(7437),n=t(2549),c=t(2898);let a=(0,c.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function PermissionDeniedModal(e){let{onClose:l,onRetry:t}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-sm p-8 text-center relative",children:[(0,s.jsx)("button",{onClick:l,className:"absolute top-4 right-4 text-gray-400",children:(0,s.jsx)(n.Z,{size:24})}),(0,s.jsx)("div",{className:"w-20 h-20 bg-red-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,s.jsx)(a,{size:40,className:"text-red-500"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Permission Denied"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:"Camera/Microphone access was blocked. To make calls, please:"}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6 text-left",children:(0,s.jsxs)("ol",{className:"text-sm text-gray-700 space-y-2",children:[(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-bold",children:"1."}),(0,s.jsx)("span",{children:"Click the lock icon in your browser's address bar"})]}),(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-bold",children:"2."}),(0,s.jsx)("span",{children:"Allow Camera and Microphone permissions"})]}),(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-bold",children:"3."}),(0,s.jsx)("span",{children:'Refresh the page or click "Try Again"'})]})]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:l,className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-full font-semibold",children:"Cancel"}),(0,s.jsx)("button",{onClick:t,className:"flex-1 bg-primary text-white py-3 rounded-full font-semibold",children:"Try Again"})]})]})})}},5314:function(e,l,t){t.d(l,{Z:function(){return PermissionModal}});var s=t(7437),n=t(2549),c=t(8339),a=t(4043);function PermissionModal(e){let{type:l,onAllow:t,onDeny:r}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-sm p-8 text-center relative",children:[(0,s.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400",children:(0,s.jsx)(n.Z,{size:24})}),(0,s.jsx)("div",{className:"w-20 h-20 bg-primary/10 rounded-full mx-auto mb-4 flex items-center justify-center",children:"video"===l?(0,s.jsx)(c.Z,{size:40,className:"text-primary"}):(0,s.jsx)(a.Z,{size:40,className:"text-primary"})}),(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["video"===l?"Camera & Microphone":"Microphone"," Access"]}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"video"===l?"Yaari needs access to your camera and microphone to make video calls.":"Yaari needs access to your microphone to make audio calls."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:r,className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-full font-semibold",children:"Not Now"}),(0,s.jsx)("button",{onClick:t,className:"flex-1 bg-primary text-white py-3 rounded-full font-semibold",children:"Allow"})]})]})})}},5997:function(e,l,t){t.r(l),t.d(l,{SocketProvider:function(){return SocketProvider},useSocket:function(){return useSocket}});var s=t(7437),n=t(2265),c=t(4337);let a=(0,n.createContext)({socket:null,isConnected:!1,incomingCall:null,setIncomingCall:()=>{}}),useSocket=()=>(0,n.useContext)(a);function SocketProvider(e){let{children:l}=e,[t,r]=(0,n.useState)(null),[o,i]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e="https://acsgroup.cloud";console.log("\uD83D\uDD0C Attempting to connect to Socket.io server:",e);let l=(0,c.io)(e,{transports:["websocket","polling"],timeout:2e4,forceNew:!0,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5});return l.on("connect",()=>{console.log("✅ Socket connected successfully"),i(!0);let e=localStorage.getItem("user");if(e)try{let t=JSON.parse(e);console.log("\uD83D\uDC64 Registering user:",t.id),l.emit("register",t.id)}catch(e){console.error("❌ Error parsing user data:",e)}}),l.on("connect_error",e=>{console.error("❌ Socket connection error:",e),i(!1)}),l.on("disconnect",e=>{console.log("\uD83D\uDD0C Socket disconnected:",e),i(!1)}),l.on("reconnect",e=>{console.log("\uD83D\uDD04 Socket reconnected after",e,"attempts"),i(!0)}),l.on("reconnect_error",e=>{console.error("❌ Socket reconnection error:",e)}),l.on("incoming-call",e=>{let{callerId:l,callerName:t,callType:s,channelName:n}=e;console.log("\uD83D\uDCE5 Incoming call (global):",{callerId:l,callerName:t,callType:s,channelName:n}),u({callerId:l,callerName:t,callType:s,channelName:n})}),l.on("call-accepted",e=>{let{channelName:l,callType:t}=e;console.log("✅ Call accepted (global):",{channelName:l,callType:t});try{l&&sessionStorage.setItem("channelName",l);let e=sessionStorage.getItem("callData"),s=t||"audio";if(e)try{let l=JSON.parse(e);((null==l?void 0:l.type)==="video"||(null==l?void 0:l.type)==="audio")&&(s=l.type)}catch(e){}else t&&sessionStorage.setItem("callData",JSON.stringify({userName:"",userAvatar:"",rate:"video"===t?10:5,type:t,channelName:l,otherUserId:""}));let n="video"===s?"/video-call":"/audio-call";window.location.href=n}catch(e){console.error("Error handling global call-accepted:",e)}}),l.on("call-busy",e=>{let{message:l}=e;console.log("\uD83D\uDCF5 Call busy:",l),alert(l)}),l.on("call-ended",()=>{console.log("\uD83D\uDED1 Call ended (global) — clearing incomingCall"),u(null)}),r(l),()=>{console.log("\uD83E\uDDF9 Cleaning up socket connection"),l.off("incoming-call"),l.off("call-accepted"),l.off("call-busy"),l.off("call-ended"),l.off("connect"),l.off("connect_error"),l.off("disconnect"),l.off("reconnect"),l.off("reconnect_error"),l.disconnect()}},[]),(0,s.jsx)(a.Provider,{value:{socket:t,isConnected:o,incomingCall:d,setIncomingCall:u},children:l})}}}]);